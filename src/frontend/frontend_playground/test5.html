<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Right Click Position</title>
<style>
    #parentDiv {
        position: relative;
        width: 400px;
        height: 300px;
        background-color: lightgrey;
        border: 2px solid black;
    }

    #customDiv {
        position: absolute;
        width: 100px;
        height: 100px;
        background-color: lightblue;
    }
</style>
</head>
<body>

<!-- Parent div -->
<div id="parentDiv">
    <!-- Your content -->
    <div id="customDiv"></div>
</div>

<script>
document.getElementById('parentDiv').addEventListener('contextmenu', function(event) {
    event.preventDefault(); // Prevent the default context menu from appearing

    // Get the mouse coordinates relative to the parent div
    const parentDivRect = event.target.getBoundingClientRect();
    const mouseX = event.clientX - parentDivRect.left;
    const mouseY = event.clientY - parentDivRect.top;

    // Check if the right-click event occurred within the parent div
    if (mouseX >= 0 && mouseY >= 0 && mouseX <= parentDivRect.width && mouseY <= parentDivRect.height) {
        // Create or move the div to the mouse position
        const customDiv = document.getElementById('customDiv');
        customDiv.style.left = mouseX + 'px';
        customDiv.style.top = mouseY + 'px';

        // Make the div visible
        customDiv.style.display = 'block';
    }
});

document.addEventListener('click', function(event) {
    const customDiv = document.getElementById('customDiv');
    const parentDiv = document.getElementById('parentDiv');

    // Hide the div when a left click occurs outside the parent div or custom div
    if (event.button === 0 && event.target !== customDiv && event.target !== parentDiv) { 
        customDiv.style.display = 'none';
    }
});
</script>

</body>
</html>
